<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; connect-src 'self' ws: wss: http: https:;">
  <title>–ú–æ—Ä—Å–∫–æ–π –°–∞–ø—ë—Ä</title>
  <link rel="stylesheet" href="./styles/main.css">
</head>
<body>
  <div id="app">
    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="menu-screen" class="screen active">
      <div class="menu-container">
        <h1 class="game-title">–ú–æ—Ä—Å–∫–æ–π –°–∞–ø—ë—Ä</h1>
        
        
        <div class="menu-form">
          <div class="form-group">
            <label for="player-name">–í–∞—à–µ –∏–º—è:</label>
            <input type="text" id="player-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" maxlength="20">
          </div>
          
          <div class="form-group">
            <label for="server-url">–°–µ—Ä–≤–µ—Ä:</label>
            <input type="text" id="server-url" placeholder="http://localhost:3000" value="http://localhost:3000">
          </div>
          
          <div class="form-group">
            <label for="room-id">–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã:</label>
            <input type="text" id="room-id" placeholder="SHIP-1234" maxlength="10">
          </div>
          
          <div class="button-group">
            <button id="btn-create-room" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
            <button id="btn-join-room" class="btn btn-secondary">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
          </div>
        </div>
        
        <div id="connection-status" class="status"></div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –æ–∂–∏–¥–∞–Ω–∏—è -->
    <div id="waiting-screen" class="screen">
      <div class="waiting-container">
        <h2>–û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–∞...</h2>
        <p id="waiting-status" class="waiting-status">–û–∂–∏–¥–∞–µ–º –∏–≥—Ä–æ–∫–∞</p>
        <div class="room-code-wrap">
          <span class="room-code-label">–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã:</span>
          <span id="room-code" class="room-code"></span>
          <button id="btn-copy-room" class="btn btn-secondary btn-small btn-copy" type="button">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
        <p class="hint">–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —ç—Ç–∏–º –∫–æ–¥–æ–º —Å –¥—Ä—É–≥–æ–º</p>
        <div class="loader"></div>
        <button id="btn-cancel-waiting" class="btn btn-danger">–ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ—Ä–∞–±–ª–µ–π -->
    <div id="placement-screen" class="screen">
      <div class="placement-container">
        <h2>–†–∞—Å—Å—Ç–∞–≤—å—Ç–µ –∫–æ—Ä–∞–±–ª–∏</h2>
        
        <div class="placement-layout">
          <div class="board-section">
            <canvas id="placement-board" width="500" height="500"></canvas>
          </div>
          
          <div class="ships-panel">
            <h3>–ö–æ—Ä–∞–±–ª–∏</h3>
            <div id="ships-to-place" class="ships-list"></div>
            
            <h3>–ú–∏–Ω—ã (9)</h3>
            <div id="mines-counter" class="counter">–û—Å—Ç–∞–ª–æ—Å—å: <span>9</span></div>
            
            <h3>–ë—Ä–æ–Ω—è (5)</h3>
            <div id="armor-counter" class="counter">–û—Å—Ç–∞–ª–æ—Å—å: <span>5</span></div>
            
            <div class="placement-controls">
              <button id="btn-rotate" class="btn btn-small">–í—Ä–∞—â–∞—Ç—å (R)</button>
              <button id="btn-clear" class="btn btn-small btn-danger">–û—á–∏—Å—Ç–∏—Ç—å</button>
              <button id="btn-random" class="btn btn-small">–°–ª—É—á–∞–π–Ω–æ</button>
            </div>
            
            <button id="btn-ready" class="btn btn-primary btn-large" disabled>–ì–æ—Ç–æ–≤!</button>
          </div>
        </div>
      </div>
    </div>

    <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
    <div id="game-screen" class="screen">
      <div class="game-container">
        <div class="game-header">
          <div class="player-info player-self">
            <span class="player-name" id="self-name">–í—ã</span>
            <div class="lives" id="self-lives"></div>
          </div>
          
          <div class="game-status">
            <div id="turn-indicator" class="turn-indicator">–í–∞—à —Ö–æ–¥</div>
            <div class="timers">
              <span id="turn-timer">60</span>
              <span class="timer-separator">|</span>
              <span id="game-timer">00:00</span>
            </div>
          </div>
          
          <div class="player-info player-opponent">
            <span class="player-name" id="opponent-name">–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫</span>
            <div class="lives" id="opponent-lives"></div>
          </div>
        </div>
        
        <div class="boards-container">
          <div class="board-wrapper">
            <h3>–í–∞—à–µ –ø–æ–ª–µ</h3>
            <canvas id="self-board" width="400" height="400"></canvas>
          </div>
          
          <div class="board-wrapper">
            <h3>–ü–æ–ª–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞</h3>
            <canvas id="opponent-board" width="400" height="400"></canvas>
          </div>
        </div>
        
        <div class="abilities-panel">
          <button id="btn-scan" class="btn btn-ability" data-ability="scan">
            <span class="ability-icon">üîç</span>
            <span class="ability-name">–°–∫–∞–Ω 3x3</span>
            <span class="ability-cooldown"></span>
          </button>
          <button id="btn-scout" class="btn btn-ability" data-ability="scout">
            <span class="ability-icon">üëÅ</span>
            <span class="ability-name">–†–∞–∑–≤–µ–¥—á–∏–∫</span>
            <span class="ability-count">10</span>
            <span class="ability-cooldown"></span>
          </button>
          <button id="btn-flag" class="btn btn-ability" data-ability="flag">
            <span class="ability-icon">üö©</span>
            <span class="ability-name">–§–ª–∞–≥ —Å–∞–ø—ë—Ä–∞</span>
          </button>
        </div>
        
        <div id="game-log" class="game-log"></div>

        <div class="audio-controls" aria-label="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤—É–∫–æ–º">
          <button id="btn-audio-drag" class="audio-drag" aria-label="–ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å">
            <span aria-hidden="true">‚ãÆ‚ãÆ</span>
          </button>
          <button id="btn-mute" class="btn btn-audio" aria-pressed="false">
            <span class="mute-icon" aria-hidden="true">üîä</span>
            <span class="mute-text">–ë–µ–∑ –∑–≤—É–∫–∞</span>
          </button>
          <input
            id="volume-slider"
            class="volume-slider"
            type="range"
            min="0"
            max="100"
            value="50"
            step="1"
            aria-label="–ì—Ä–æ–º–∫–æ—Å—Ç—å"
          />
          <button id="btn-audio-collapse" class="audio-collapse" aria-label="–°–≤–µ—Ä–Ω—É—Ç—å">
            <span aria-hidden="true">‚ñæ</span>
          </button>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∫–æ–Ω—Ü–∞ –∏–≥—Ä—ã -->
    <div id="gameover-screen" class="screen">
      <div class="gameover-container">
        <h2 id="gameover-title">–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞</h2>
        <p id="gameover-message"></p>
        
        <div class="stats">
          <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
          <div id="gameover-stats"></div>
        </div>
        
        <button id="btn-play-again" class="btn btn-primary">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
      </div>
    </div>
  </div>

  <script type="module" src="./index.ts"></script>
</body>
</html>
